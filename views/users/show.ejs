  <%- include('../partials/header') %> <!-- Include site-wide header (nav, title, etc) -->
  <%- include('../partials/flash') %>  <!-- Show flash success/error messages -->

  <!-- Main container with consistent max width -->
  <div class="container mt-4" style="max-width: 900px;">

    <!-- Show username as page title -->
    <h1 class="mb-4"><%= user.name %>'s Profile</h1>

    <!-- Display user's email -->
    <div class="mb-3 fs-5 text-muted">
      <strong>Email:</strong>
      <span><%= user.email %></span>
    </div>

    <!-- Display user's bio -->
    <div class="mb-3 fs-5 text-muted">
      <strong>Bio:</strong>
      <span><%= user.bio || '—' %></span>
    </div>

    <!-- Display user's Instagram -->
    <div class="mb-3 fs-5 text-muted">
      <strong>Instagram:</strong>
      <span><%= user.instagram || '—' %></span>
    </div>

    <!-- Display user's Twitter -->
    <div class="mb-3 fs-5 text-muted">
      <strong>Twitter:</strong>
      <span><%= user.twitter || '—' %></span>
    </div>

    <!-- Display user's Facebook -->
    <div class="mb-3 fs-5 text-muted">
      <strong>Facebook:</strong>
      <span><%= user.facebook || '—' %></span>
    </div>

    <!-- Display user's LinkedIn -->
    <div class="mb-3 fs-5 text-muted">
      <strong>LinkedIn:</strong>
      <span><%= user.linkedin || '—' %></span>
    </div>

    <!-- Only show Edit Profile button if the current user owns the profile -->
    <% if (currentUser && currentUser._id.toString() === user._id.toString()) { %>
      <a href="/users/<%= user._id %>/edit" class="btn btn-primary mb-4">Edit Profile</a>
    <% } %>

    <!-- Divider -->
    <hr class="my-4" />

    <!-- Section showing all memes created by this user -->
    <h3>Memes by <%= user.name %></h3>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mt-3">
      <% userMemes.forEach(meme => { %>
        <div class="col d-flex align-items-start">
          <a href="/memes/<%= meme._id %>" class="d-flex align-items-center text-decoration-none fs-5">
            <% if ((meme.images && meme.images[0]) || meme.image) { %>
              <img
                src="<%= meme.images?.[0] || meme.image %>"
                alt="<%= meme.name %>"
                class="me-3"
                style="height: 60px; width: auto; object-fit: cover;"
              />
            <% } %>
            <span><%= meme.name %></span>
          </a>
        </div>
      <% }) %>
    </div>

  </div>

 <%- include('../partials/test-footer') %>  <!-- site-wide footer (scripts, links, etc) -->