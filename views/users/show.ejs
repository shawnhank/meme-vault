<%- include('../partials/header') %>  <!-- Include site-wide header (nav, title, etc) -->
<%- include('../partials/flash') %>   <!-- flash messages -->

<!-- Show the user name profile -->
<h1><%= user.name %>'s Profile</h1>

<% if (user._id.toString() === currentUser._id.toString()) { %>
  <div>
    <p><strong>Email:</strong> <%= user.email %></p>
    <p><strong>Bio:</strong> <%= user.bio || '—' %></p>
    <p><strong>Instagram:</strong> <%= user.instagram || '—' %></p>
    <p><strong>Twitter:</strong> <%= user.twitter || '—' %></p>
    <p><strong>Facebook:</strong> <%= user.facebook || '—' %></p>
    <p><strong>LinkedIn:</strong> <%= user.linkedin || '—' %></p>
  </div>
<% } %>

<!-- Show "Edit Profile" button only if the signed-in user is
 viewing their own profile (ownership check) -->

<% if (user && currentUser && user._id.toString() === currentUser._id.toString()) { %>
  <a href="/users/<%= user._id %>/edit" class="btn btn-primary">Edit Profile</a>
<% } %>

<!-- Heading for the selected user profile -->
<h2>Memes by <%= user.name %></h2>

<ul>
  <% memes.forEach(function(meme) { %>  <!-- Loop through all memes created by this user -->
    <li>
      <!-- Link to the individual meme's show page -->
      <a href="/memes/<%= meme._id %>"><%= meme.name %></a>
    </li>
  <% }) %>
</ul>

<%- include('../partials/footer') %>  <!-- site-wide footer (scripts, links, etc) -->